[TOC]

##  

# 四.函数

## 一.引入

**函数**分为**内置函数**和**自定义函数**，而MySQL的**内置函数**则分为**单行函数**和**多行函数（也称为聚合函数或分组函数）**。

下述内容的函数多为**单行函数**。

## 二.数值函数

### 1.基本函数

| 函数                | 用法                        |
| ------------------- | --------------------------- |
| ABS(x)              | 返回x的绝对值               |
| SIGN(x)             | 返回x的符号，返回值为1,-1,0 |
| PI()                | 返回圆周率的值              |
| CEIL(x)             | 上取整                      |
| FLOOR(x)            | 下取整                      |
| LEAST(e1,e2,...)    | 取最小值                    |
| GREATEST(e1,e2,...) | 取最大值                    |
| MOD(x,y)            | 取余                        |
| RAND()              | 返回0~1的随机数             |
| RAND(x)             | 同上，但输入seed值x         |
| ROUND(x)            | 四舍五入                    |
| ROUND(x,y)          | 保留小数点y位的四舍五入     |
| TRUNCATE(x,y)       | 保留小数点y位的截断         |
| SQRT(x)             | 开根号，x为负时返回NULL     |

### 2.三角函数

角度弧度相关：

| 函数       | 用法           |
| ---------- | -------------- |
| RADIANS(x) | 角度转化为弧度 |
| DEGREES(x) | 弧度转化为角度 |

三角函数相关：

| 函数(x为弧度制) | 用法(re为结果)   |
| --------------- | ---------------- |
| SIN(x)          | re = sin x       |
| ASIN(x)         | re = arcsin x    |
| COS(x)          | re = cos x       |
| ACOS(x)         | re = arccos x    |
| TAN(x)          | re = tan x       |
| ATAN(x)         | re = arctan x    |
| ATAN2(m,n)      | re = arctan(m/n) |
| COT(x)          | re = cot x       |

### 3.指数和对数

| 函数                | 用法(re为结果) |
| ------------------- | -------------- |
| POW(x,y) POWER(x,y) | re = x^y       |
| EXP(x)              | re = e^x       |
| LN(x) LOG(x)        | re = ln x      |
| LOG10(x)            | re = log~10~x  |
| LOG2(x)             | re = log~2~x   |

4.进制转换

| 函数          | 用法                         |
| ------------- | ---------------------------- |
| BIN(x)        | 返回x的二进制编码            |
| HEX(x)        | 返回x的十六进制编码          |
| OCT(x)        | 返回x的八进制编码            |
| CONV(x,f1,f2) | 将f1进制转为f2进制并返回结果 |

## 三.字符串函数

| 函数                           | 用法                                                      |
| ------------------------------ | --------------------------------------------------------- |
| ASCII(s)                       | 返回字符串s的第一个字符的ASCII码                          |
| CHAR_LENGTH(s)                 | 返回字符串s的字符数                                       |
| LENGTH(s)                      | 返回字符串s的字节数                                       |
| CONCAT(s1,s2,s3,...)           | 连接s1,s2,s3...为一个字符串                               |
| CONCAT_WS(x,s1,s2,s3,...)      | 在s1,s2,s3...之间加入x并连接                              |
| INSERT(str,idx,len,replacestr) | 将字符串str从idx开始，len个字符长度的子串替换为replacestr |
| REPLACE(str,a,b)               | 用字符串b替代str中所有子串a                               |
| UPPER(s) UCASE(s)              | 将字符串s中所有小写字符改成大写                           |
| LOWER(s) LCASE(s)              | 将字符串s中所有大写字符改成小写                           |
| LEFT(str,n)                    | 返回字符串str最左边的n个字符                              |
| RIGHT(str,n)                   | 返回字符串str最右边的n个字符                              |
| LPAD(str,len,pad)              | 用字符串pad对str最左边进行填充，直至str的长度为len个字符  |
| RPAD(str,len,pad)              | 用字符串pad对str最右边进行填充，直至str的长度为len个字符  |
| LTRIM(s)                       | 去掉字符串s左侧的空格                                     |
| RTRIM(s)                       | 去掉字符串s右侧的空格                                     |
| TRIM(s)                        | 去掉字符串s开始和结尾的空格                               |
| TRIM(s1 FROM s)                | 去掉字符串s开始和结尾的s1                                 |
| TRIM(LEADING s1 FROM s)        | 去掉字符串s开始的s1                                       |
| TRIM(TRAILING s1 FROM s)       | 去掉字符串s结尾的s1                                       |
| REPEAT(str,n)                  | 返回字符串str重复n次后的字符串                            |
| SPACE(n)                       | 返回n个空格                                               |
| STRCMP(s1,s2)                  | 比较s1和s2的ASCII码值的大小                               |
| SUBSTR(s,index,len)            | 返回从字符串s的index位置起的len歌字符                     |
| LOCATE(substr,str)             |                                                           |
| ELT(m,s1,s2,...,sn)            |                                                           |
| FIELD(s,s1,s2,...,sn)          |                                                           |
| FIND_IN_SET(s1,s2)             |                                                           |

